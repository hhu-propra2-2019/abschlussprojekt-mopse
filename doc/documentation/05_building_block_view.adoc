[[section-building-block-view]]
== Bausteinsicht

****
Eine Auflistung und Erklärung aller Bausteine des Systems.
Das wären zum Beispiel:

* Module
* Komponenten
* Subsysteme
* Klassen
* Interfaces
* Pakete
* Bibliotheken
* Frameworks
* Schichten
* Funktionen
* Datenstrukturen

Diese Sicht sollte in jeder Architekturdokumentation vorhanden sein.
In der Analogie zum Hausbau bildet die Bausteinsicht den _Grundrissplan_.

Die Bausteinsicht ist eine hierarchische Sammlung von Blackboxen und Whiteboxen (siehe Abbildung unten) und deren Beschreibungen.

image:05_building_blocks-DE.png["Baustein Sichten"]

Die *Gesamtabgrenzung* zeigt unser System in Abgrenzung zu Nachbarsystemen.

*Ebene 1* ist die Whitebox-Beschreibung des Gesamtsystems, zusammen mit Blackbox-Beschreibungen der darin enthaltenen Bausteine (in unserem Fall die einzelnen Schichten).

*Ebene 2* zoomt in die einzelnen Schichten hinein und zeigt die darin enthaltenen Komponenten.

*Ebene 3* zoomt in die Komponenten hinein und beschreibt deren einzelne Funktionen und Schnittstellen genauer.
****

=== Gesamtabgrenzung

****
Eine Beschreibung des Gesamtsystems als Whitebox nach folgendem Template:

* Ein Übersichtsdiagramm
* die Begründung dieser Zerlegung
* Blackbox-Beschreibungen der hier enthaltenen Bausteine mittels einer Tabelle.

Es geht um die Abgrenzung unseres Systems zu den Nachbarsystemen anderer Gruppen.
****

_**<Übersichtsdiagramm>**_

Begründung:: _<Erläuternder Text>_

Enthaltene Bausteine::

[cols="1,1,1" options="header"]
|===
|Komponente |Funktion | Schnittstellen
| Keycloak | Authentifizierung und Authentifikation der User. | Wir erzeugen uns dafür ein eigenes Account Objekt.
|===

=== Ebene 1

****
Ebene 1 zeigt das Gesamtsystem bzw. dessen Komponenten (also die 5 Schichten), die Darstellung erfolgt genauso wie zuvor auch.
****

_**<Übersichtsdiagramm>**_

Begründung:: _<Erläuternder Text>_

Enthaltene Bausteine::

[cols="1,1,1" options="header"]
|===
|Komponente |Funktion | Schnittstellen
| _<Komponente-1>_ | _<Funktion-1>_ | _<Schnittstellen-1>_
| _<Komponente-2>_ | _<Funktion-2>_ | _<Schnittstellen-2>_
|===

=== Ebene 2

****
Ebene 2 zeigt die einzelnen Schichten im Detail und deren Komponenten.
Darstellung nach gleichem Schema wie zuvor.
****

_**<Übersichtsdiagramm>**_

Begründung:: Jeder Controller repräsentiert einen Routenanfang `/material1/{routenBeginn}`, wodurch zum einen großen Controllerklassen vermieden werden und wir es den praktischen Nutzen hat, dass man Routenbeginne an der Klasse selbst annotieren kann.

Enthaltene Bausteine::

[cols="1,1,1" options="header"]
|===
|Komponente |Funktion | Schnittstellen
| _<Komponente-1>_ | _<Funktion-1>_ | _<Schnittstellen-1>_
| _<Komponente-2>_ | _<Funktion-2>_ | _<Schnittstellen-2>_
|===

=== Ebene 3

****
Ebene 3 zeigt die einzelnen Komponenten einer Schicht im Detail und deren Funktionen.
Darstellung nach gleichem Schema wie zuvor.
****

==== Präsentation

_**<Übersichtsdiagramm>**_

Begründung:: _<Erläuternder Text>_

Enthaltene Bausteine::

[cols="1,1,1" options="header"]
|===
|Komponente |Funktion |
| GroupsController | Bereitstellung aller Routen, die mit `/groups` beginnen.  | `GET: /material1/groups/`
| GroupController | Bereitstellung aller Routen, die mit `/group` beginnen. | `GET: /material1/group/{groupId}`

`GET: /material1/group/{groupId}/search`

`GET: /material1/group/{groupId}/url`
| DirectoryController | Bereitstellung aller Routen, die mit `/dir` beginnen. | `GET: /material1/dir/{dirId}`

`POST: /material1/dir/{dirId}`/create

`POST: /material1/dir/{dirId}`/search

`POST: /material1/dir/{dirId}`/upload

`DELETE: /material1/dir/{dirId}`
| FileInfoRepository | Bereitstellung von Zugriffsfunktionen auf das `FileInfo`-Aggregat | ...
|===

==== Persistenz

Begründung:: Die einzelnen Repositories korrespondieren zu den Aggregaten.

===== Repositories

[cols="1,1,1" options="header"]
|===
| Komponente | Funktion |
| FileInfoRepository | Bereitstellung von Zugriffsfunktionen auf das `FileInfo`-Aggregat | Standardfunktionen von
CRUDRepository
| DirectoryRepository | Bereitstellung von Zugriffsfunktionen auf das `Directory`-Aggregat | Standardfunktionen von
CRUDRepository
| DirectoryPermissionsRepository | Bereitstellung von Zugriffsfunktionen auf das `DirectoryPermissions`-Aggregat |
Standardfunktionen von CRUDRepository
|===

===== Aggregate

[cols="1,1" options="header"]
|===
| Aggregat | Funktion
| `FileInfo` | Repräsentiert eine Datei im System
| `Directory` | Repräsentiert einen Ordner im System
| `DirectoryPermissions` | Repräsentiert die Berechtigungen aller Rollen für einen Ordner im System
|===